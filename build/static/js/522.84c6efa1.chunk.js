"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[522],{208:function(a,t,e){e.r(t),e.d(t,{default:function(){return h}});var n=e(152),i=e(504),c=e(791),l=e(384),s=e(423),r=e(970),d=e(184),o=function(a){var t=a.uiData,e=a.loading,n=a.lang,i=a.contentChange,c=!e&&t?(0,d.jsxs)("ul",{onClick:i,children:[(0,d.jsx)("li",{className:"admin-side_item","data-target":"start",children:(0,d.jsx)("div",{className:"admin-side_item_btn","data-target":"start",children:t.btn_main[n]})}),(0,d.jsx)("li",{className:"admin-side_item","data-target":"catalog",children:(0,d.jsx)("div",{className:"admin-side_item_btn","data-target":"catalog",children:t.btn_catalog[n]})}),(0,d.jsx)("li",{className:"admin-side_item","data-target":"mebel",children:(0,d.jsx)("div",{className:"admin-side_item_btn","data-target":"mebel",children:t.btn_mebel[n]})}),(0,d.jsx)("li",{className:"admin-side_item","data-target":"banner",children:(0,d.jsx)("div",{className:"admin-side_item_btn","data-target":"banner",children:t.btn_banner[n]})}),(0,d.jsx)("li",{className:"admin-side_item","data-target":"collection",children:(0,d.jsx)("div",{className:"admin-side_item_btn","data-target":"collection",children:t.btn_set[n]})}),(0,d.jsx)("li",{className:"admin-side_item","data-target":"ui",children:(0,d.jsx)("div",{className:"admin-side_item_btn","data-target":"ui",children:t.btn_addUI[n]})})]}):null;return(0,d.jsx)("div",{className:"admin-side",children:c})},u=e(754),m=e.p+"static/media/delete.9e293051bc3753d3441b.png",g=function(a){var t=a.lang,e=a.langs,i=(0,c.useRef)(),s=(0,c.useRef)(),o=(0,c.useState)(null),u=(0,n.Z)(o,2),g=u[0],h=u[1],f=(0,c.useState)(null),x=(0,n.Z)(f,2),j=(x[0],x[1]),b=(0,c.useState)(null),v=(0,n.Z)(b,2),N=v[0],C=v[1],_=(0,c.useState)(null),p=(0,n.Z)(_,2),k=p[0],Z=p[1],S=(0,c.useState)([]),A=(0,n.Z)(S,2),E=A[0],D=A[1],O=(0,c.useState)([]),w=(0,n.Z)(O,2),L=w[0],y=w[1],$=(0,c.useState)(!1),q=(0,n.Z)($,2),G=q[0],I=q[1],R=(0,l.Z)(),P=R.loading,U=(R.error,R.postData);(0,c.useEffect)((function(){B()}),[]);var z,B=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={action:"read"};a&&(t.id=a,I(!0)),U({catalog:t}).then((function(t){F(a,t.Catalog)})).catch((function(a){return console.log("error read catalogs, ",a)}))},F=function(a,t){console.log(a),a?(y(t),I(!1)):D(t)},H=function(a,t){var n={action:"write"};e.forEach((function(t){n[t]=document.querySelector("input[data-target=".concat(a,"-").concat(t,"]")).value,document.querySelector("input[data-target=".concat(a,"-").concat(t,"]")).value=""})),t&&(n.id=t,I(!0)),U({catalog:n}).then((function(a){F(t,a.Catalog)})).catch((function(a){console.log("error add catalog: ",n," error: ",a),alert("Error add to catalog, details in the console")}))},J=function(a,t){var e=a.target.parentElement.getAttribute(t),n={action:"del",target:"data-mainid"===t?"cat":"subCat",id:e};U({catalog:n}).then((function(a){F("data-subid"===t,a.Catalog)})).catch((function(a){console.log("error delete catalog: ",n,"error: ",a),alert("Error delete, details in the console")}))},K=function(a,t){a.target.getAttribute("data-subid")?j(a.target.getAttribute("data-subid")):(j(null),Z(!1),s.current&&s.current.classList.remove("active"),h(a.target.getAttribute("data-mainid")),y([]),B(a.target.getAttribute("data-mainid"))),t.current&&t.current.classList.remove("active"),t.current=a.target,t.current.classList.add("active")},M=function(a){return e.map((function(t,e){return(0,d.jsx)("input",{type:"text",className:"addCat-input","data-lang":t,"data-target":"".concat(a,"-").concat(t),placeholder:t},"".concat(a,"-").concat(t," ").concat(e))}))},Q=function(a){"main"===a?C((function(a){return!a})):Z((function(a){return!a}))},T=g?"addCat right ":"addCat right hide",V=N?"add-area ":"add-area hide",W=k&&g?"add-area ":"add-area hide";return(0,d.jsxs)("div",{className:"admin-catalog",children:[(0,d.jsx)("h4",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430"}),(0,d.jsxs)("div",{className:"admin-catalog-data",children:[(0,d.jsxs)("div",{className:"admin-catalog-data_right",children:[(0,d.jsx)("h4",{children:"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043a\u0430\u0442\u0430\u043b\u043e\u0433:"}),(0,d.jsx)("ul",{className:"items",onClick:function(a){K(a,i)},children:P&&!G?(0,d.jsx)(r.$,{}):(z="main",E.map((function(a){return(0,d.jsx)("li",{children:(0,d.jsxs)("div",{className:"item","data-mainid":a.id,children:[a[t]," ",(0,d.jsx)("img",{src:m,alt:"delete",onClick:function(a){return J(a,"data-mainid")}})]})},"".concat(z).concat(a.id))})))}),(0,d.jsxs)("div",{className:"addCat left",children:[(0,d.jsx)("button",{className:"addCat-btn",onClick:function(){return Q("main")},children:"Add Catalog"}),(0,d.jsxs)("div",{className:V,children:[M("mainCatalog"),(0,d.jsx)("button",{className:"addCat-btn",onClick:function(){return H("mainCatalog",null)},children:"Ok"})]})]})]}),(0,d.jsxs)("div",{className:"admin-catalog-data_left",children:[(0,d.jsx)("h4",{children:"\u041f\u043e\u0434\u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0438:"}),(0,d.jsx)("ul",{className:"items",onClick:function(a){K(a,s)},children:G?(0,d.jsx)(r.$,{}):L.map((function(a){return(0,d.jsx)("li",{className:"items-elem",children:(0,d.jsxs)("div",{className:"item","data-subid":a.id,children:[a[t]," ",(0,d.jsx)("img",{src:m,alt:"delete",onClick:function(a){return J(a,"data-subid")}})]})},"sub".concat(a.id))}))}),(0,d.jsxs)("div",{className:T,children:[(0,d.jsx)("button",{className:"addCat-btn",onClick:function(){return Q("sub")},children:"Add subCatalog"}),(0,d.jsxs)("div",{className:W,children:[M("subCatalog"),(0,d.jsx)("button",{className:"addCat-btn",onClick:function(){return H("subCatalog",g)},children:"Ok"})]})]})]})]})]})},h=function(a){var t=(0,c.useState)(a.lang),e=(0,n.Z)(t,2),m=e[0],h=e[1],f=(0,c.useState)("start"),x=(0,n.Z)(f,2),j=x[0],b=x[1],v=(0,l.Z)(),N=v.postData,C=v.clearError,_=v.error,p=v.loading,k=(0,c.useState)(null),Z=(0,n.Z)(k,2),S=Z[0],A=Z[1],E=a.langs;(0,c.useEffect)((function(){h((function(t){return a.lang})),console.log("change lang to: ",m)}),[a.lang]),(0,c.useEffect)((function(){D()}),[]);var D=function(){C(),N({getlocale:""}).then((function(a){A(a.Getlocale)})).catch((function(a){return console.log("error get data from server: ",a)}))},O=function(){return(0,d.jsxs)("div",{className:"admin-container",children:[(0,d.jsx)("h3",{children:"\u0410\u0434\u043c\u0438\u043d \u043f\u0430\u043d\u0435\u043b\u044c!"}),(0,d.jsx)("p",{children:"........................."}),(0,d.jsxs)(i.OL,{to:"/",children:["\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443  ",S.button_send[m]]})]})},w=_?(0,d.jsx)(s.Z,{}):null,L=p&&!_?(0,d.jsx)(r.$,{}):null,y=p||_||!S?null:function(){switch(j){case"ui":return(0,d.jsx)("div",{className:"admin-container",children:(0,d.jsx)(u.Z,{lang:a.lang,langs:a.langs,uIData:a.uiData.Getlocale})});case"catalog":return(0,d.jsx)("div",{className:"admin-container",children:(0,d.jsx)(g,{lang:m,langs:E})});case"start":return(0,d.jsx)(O,{});default:return(0,d.jsxs)("div",{className:"admin-container",children:[" ",(0,d.jsx)("h4",{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442:)))"})]})}}();return(0,d.jsxs)("div",{className:"admin-panel",children:[p?null:(0,d.jsx)(o,{uiData:S,loading:p,lang:m,contentChange:function(a){var t=a.target.getAttribute("data-target");b(t)}}),w,L,y]})}},423:function(a,t,e){var n=e(184);t.Z=function(){return(0,n.jsxs)("div",{className:"error-loading",children:[(0,n.jsx)("h2",{children:"OOPS!!!"}),(0,n.jsx)("h5",{children:"\u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :("})]})}}}]);
//# sourceMappingURL=522.84c6efa1.chunk.js.map